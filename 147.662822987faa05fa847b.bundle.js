(window.webpackJsonp=window.webpackJsonp||[]).push([[147],{2218:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<div *ngIf="!(currentWeek$ | async)">\r\n  <fp-select-week\r\n    [loading]="loading$ | async"\r\n    [weeks]="availableWeeks$ | async"\r\n    (selectWeek)="selectWeek($event)"\r\n  ></fp-select-week>\r\n</div>\r\n\r\n<div *ngIf="currentWeek$ | async">\r\n\r\n  <fp-timesheet-summary\r\n    [week]="currentWeek$ | async"\r\n    [jobs]="jobs"\r\n    ></fp-timesheet-summary> \r\n\r\n  <fp-timesheets\r\n    [loading]="(loading$ | async) ||( saving$ | async)"\r\n    [availableWeeks]="availableWeeks$ | async"\r\n    [currentWeek]= "currentWeek$ | async"\r\n    [statementsInWeek]= "statementsInWeek$ | async"\r\n    \r\n    [currentStatement]= "currentStatement$ | async"\r\n    (selectStatement) ="selectStatement($event)"\r\n  ></fp-timesheets>\r\n\r\n  <hr />\r\n\r\n  <fp-timesheet \r\n    [statement]= "currentStatement$ | async"\r\n    (saveStatements)="saveStatements($event)"\r\n    (uploadStatementAttachment)="uploadStatementAttachment($event)"\r\n    [loading]="loading$ | async"\r\n    [saving]="saving$ | async"\r\n    [attachmentUploading]="attachmentUploading$ | async">\r\n  </fp-timesheet>\r\n</div>\r\n\r\n'},2219:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<form>\r\n    <div class="form-group form-row">\r\n        <label for="statementSelect"\r\n               class="col-md-3 col-sm-4 col-12 col-form-label">{{ \'timesheets.selectStatement\' | translate }}</label>\r\n        <div class="col-md-5 col-sm-8 col-12">\r\n            <select id="statementSelect"\r\n                    class="form-control"\r\n                    [(ngModel)]="currentStatement"\r\n                    (change)="onChangeSelectedStatement()"\r\n                    name="currentStatement"\r\n                    [disabled]="loading">\r\n                <option *ngFor="let statement of statementsInWeek"\r\n                        [ngValue]="statement">{{statement.organisationName}} -\r\n                    {{statement.jobTitle}}\r\n                </option>\r\n            </select>\r\n        </div>\r\n    </div>\r\n</form>'},2220:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<fp-timesheet\r\n  [statement]="statement$ | async"\r\n>\r\n</fp-timesheet>'},2221:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<img src="./assets/flexworker-portal/payslips-placeholder.png"\r\n     *ngIf="loading && !saving" />\r\n\r\n<p *ngIf="_statement == null && !(loading && !saving)">\r\n    {{ \'timesheets.noopenthisweek\' | translate }}\r\n</p>\r\n<form *ngIf="_statement && !(loading && !saving)">\r\n\r\n    <div *ngIf="isStartEndBreakTime()"\r\n         class="form-row">\r\n        <div class="offset-1 col-md-2 col-3  ">\r\n            <div class="align-with-form-control-content">\r\n                {{ \'timesheets.start\' | translate }}\r\n            </div>\r\n        </div>\r\n        <div class="col-md-2  col-3 ">\r\n            <div class="align-with-form-control-content">\r\n                {{ \'timesheets.end\' | translate }}\r\n            </div>\r\n        </div>\r\n        <div class="col-md-2 col-3 ">\r\n            <div class="align-with-form-control-content">\r\n                {{ \'timesheets.breakTime\' | translate }}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div *ngFor="let day of days">\r\n        <div class="form-row">\r\n            <div [className]="isStartEndBreakTime() \r\n                    ? \'form-group col-1\' \r\n                    : \'form-group col-2 col-md-1\'">\r\n                <label class="col-form-label">{{day.date.format(\'dd\') | capitalizeFirst}}</label>\r\n            </div>\r\n\r\n            \x3c!-- day total --\x3e\r\n            <div *ngIf="isDayTotal()"\r\n                 class="form-group col-md-2 col-3">\r\n                <fp-time-input [(minutes)]="day.totalMinutes"\r\n                               initalMinutes="480"></fp-time-input>\r\n            </div>\r\n\r\n            \x3c!-- start end breaktime --\x3e\r\n            <div *ngIf="isStartEndBreakTime()"\r\n                 class="form-group col-md-2 col-3">\r\n                <fp-time-input [(minutes)]="day.startMinutes"\r\n                               initalMinutes="480"></fp-time-input>\r\n                <div *ngIf="submitted && day.isValid() == false && day.hasStartMinutes() == false"\r\n                     class="invalid-feedback">\r\n                    {{ \'shared.messages.this-field-is-required\' | translate }}\r\n                </div>\r\n            </div>\r\n            <div *ngIf="isStartEndBreakTime()"\r\n                 class="form-group col-md-2 col-3">\r\n                <fp-time-input [(minutes)]="day.endMinutes"\r\n                               initalMinutes="1020"></fp-time-input>\r\n                <div *ngIf="submitted && day.isValid() == false && day.hasEndMinutes() == false"\r\n                     class="invalid-feedback">\r\n                    {{ \'shared.messages.this-field-is-required\' | translate }}\r\n                </div>\r\n            </div>\r\n            <div *ngIf="isStartEndBreakTime()"\r\n                 class="form-group col-md-2 col-3">\r\n                <fp-time-input [(minutes)]="day.breakTimeMinutes"\r\n                               initalMinutes="0"></fp-time-input>\r\n                <div *ngIf="submitted && day.isValid() == false && day.getDuration() <= 0"\r\n                     class="invalid-feedback">\r\n                    {{ \'timesheets.messages.breaktime-longer-then-worktime\' | translate }}\r\n                </div>\r\n            </div>\r\n            <div *ngIf="isStartEndBreakTime()"\r\n                 class="form-group col-1">\r\n                <label class="col-form-label">{{day.durationStr}}</label>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    \x3c!-- Total --\x3e\r\n    <div class="form-row">\r\n        <div class="form-group col-2 col-md-1">\r\n            <label class="col-form-label">{{ \'timesheets.total\' | translate }}</label>\r\n        </div>\r\n        <div [className]="isStartEndBreakTime() \r\n                ? \'form-group offset-8 offset-md-6 col-2\'\r\n                : \'form-group col-md-2 col-3 align-horizontal-with-form-control-content\'">\r\n            <label class="col-form-label">{{getTotalTime()}}</label>\r\n        </div>\r\n    </div>\r\n\r\n    \x3c!-- Compensations --\x3e\r\n    <div class="form-row"\r\n         *ngFor="let otherComponent of otherComponents">\r\n        <div class="form-group col-md-5 col-9">\r\n            <label class="col-form-label">{{otherComponent.text}} </label>\r\n        </div>\r\n        <div *ngIf="otherComponent.unit == ComponentUnit.Piece || otherComponent.unit == ComponentUnit.Kilometer || otherComponent.unit == ComponentUnit.Amount"\r\n             class="form-group col-md-2 col-3">\r\n            <fp-amount-input [(amount)]="otherComponent.count"\r\n                             [min]="0"\r\n                             [step]="otherComponent.unit == ComponentUnit.Amount ? 0.01 : 1">\r\n            </fp-amount-input>\r\n        </div>\r\n        <div *ngIf="otherComponent.unit == ComponentUnit.Hour"\r\n             class="form-group col-md-2 col-3">\r\n            <fp-time-input [(minutes)]="otherComponent.count"\r\n                           [canContainMoreThenADay]="true"></fp-time-input>\r\n        </div>\r\n\r\n        <div class="form-group col-4 d-none d-md-inline">\r\n            <label class="col-form-label">({{otherComponent.unitText | translate}}) {{otherComponent.postText}}</label>\r\n        </div>\r\n        <div class="d-md-none col-12 small small-row text-right">\r\n            <div class="">{{otherComponent.countStr}} ({{otherComponent.unitText | translate}})\r\n                {{otherComponent.postText}}</div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="form-row form-group">\r\n        <div class=" col-md-3 col-sm-4 col-12">\r\n            <label class="col-form-label">{{ \'timesheets.upload-attachments\' | translate }}</label>\r\n        </div>\r\n        <fp-file-input \r\n            class="col-md-5 col-sm-8 col-12" \r\n            outerClass="col-12"            \r\n            (fileChange)="onFileUploadChange($event)"\r\n            [isUploadingFile]="attachmentUploading"></fp-file-input>\r\n\r\n    </div>\r\n\r\n    <div class="form-row"\r\n         *ngFor="let document of _statement.documents">\r\n        <div class="form-group col-12 small-row">\r\n            <a [href]="document.url"\r\n               [title]="document.fileName"\r\n               target="_blank">{{document.fileName}}</a>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="form-row">\r\n        <div class="col-12">\r\n            <div class="btn-toolbar"\r\n                 role="toolbar">\r\n                <div class="btn-group"\r\n                     role="group">\r\n                    <fp-spinner-button class="btn-group"\r\n                                       (click)="save(false)"\r\n                                       [text]=" \'shared.save\' | translate "\r\n                                       [waiting]="saving"\r\n                                       buttonClasses="btn btn-secondary"></fp-spinner-button>\r\n                    <fp-spinner-button class="btn-group"\r\n                                       buttonClasses="btn btn-primary"\r\n                                       (click)="save(true)"\r\n                                       [text]="\'shared.saveAndApprove\' | translate "\r\n                                       [waiting]="saving"></fp-spinner-button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>'},2222:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=".form-row.invalid label{\r\n    color:red;\r\n}\r\n\r\n.title-from-row .form-group {\r\n    margin-bottom:0px;\r\n}\r\n\r\n.title-from-row h5{\r\n    margin-bottom:0px; \r\n    padding-bottom:0px;\r\n    padding-top:0px;\r\n}\r\n"},2373:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"TimesheetsModule",(function(){return TimesheetsModule}));var TimesheetsActionTypes,core=__webpack_require__(0),fesm2015_router=__webpack_require__(45),ngrx_store=__webpack_require__(9),fesm2015_forms=__webpack_require__(28),ngrx_effects=__webpack_require__(24),shared_module=__webpack_require__(292),auth_guard=__webpack_require__(816),is_flexworker_guard=__webpack_require__(818),tap=__webpack_require__(102),nav_service=__webpack_require__(206);!function(TimesheetsActionTypes){TimesheetsActionTypes.LoadTimesheets="[Timesheets] Load Timesheets",TimesheetsActionTypes.LoadTimesheetsSuccess="[Timesheets] Load Timesheets Success",TimesheetsActionTypes.LoadTimesheetsFailed="[Timesheets] Load Timesheets Failed",TimesheetsActionTypes.LoadTimesheetComponents="[Timesheets] Load TimesheetComponents",TimesheetsActionTypes.LoadTimesheetComponentsSuccess="[Timesheets] Load TimesheetComponents Success",TimesheetsActionTypes.LoadTimesheetComponentsFailed="[Timesheets] Load TimesheetComponents Failed",TimesheetsActionTypes.SetCurrentWeek="[Timesheets] Set Current Week",TimesheetsActionTypes.SetCurrentStatement="[Timesheets] Set Current Statement",TimesheetsActionTypes.SaveTimesheets="[Timesheets] Save Timesheets",TimesheetsActionTypes.SaveTimesheetsSuccess="[Timesheets] Save Timesheets success",TimesheetsActionTypes.SaveTimesheetsFailed="[Timesheets] Save Timesheets failed",TimesheetsActionTypes.UploadAttachment="[Timesheets] Upload attachment",TimesheetsActionTypes.UploadAttachmentFailed="[Timesheets] Upload attachment failed",TimesheetsActionTypes.UploadAttachmentSuccess="[Timesheets] Upload attachment success"}(TimesheetsActionTypes||(TimesheetsActionTypes={}));class LoadTimesheets{constructor(origin,payload){this.origin=origin,this.payload=payload,this.type=TimesheetsActionTypes.LoadTimesheets}}class LoadTimesheetsSuccess{constructor(origin,payload){this.origin=origin,this.payload=payload,this.type=TimesheetsActionTypes.LoadTimesheetsSuccess}}class LoadTimesheetsFailed{constructor(origin){this.origin=origin,this.type=TimesheetsActionTypes.LoadTimesheetsFailed}}class LoadTimesheetComponents{constructor(origin,payload){this.origin=origin,this.payload=payload,this.type=TimesheetsActionTypes.LoadTimesheetComponents}}class LoadTimesheetComponentsSuccess{constructor(origin,payload){this.origin=origin,this.payload=payload,this.type=TimesheetsActionTypes.LoadTimesheetComponentsSuccess}}class LoadTimesheetComponentsFailed{constructor(origin,payload){this.origin=origin,this.payload=payload,this.type=TimesheetsActionTypes.LoadTimesheetComponentsFailed}}class SetCurrentWeek{constructor(origin,payload){this.origin=origin,this.payload=payload,this.type=TimesheetsActionTypes.SetCurrentWeek}}class SetCurrentStatement{constructor(origin,payload){this.origin=origin,this.payload=payload,this.type=TimesheetsActionTypes.SetCurrentStatement}}class SaveTimesheets{constructor(origin,payload){this.origin=origin,this.payload=payload,this.type=TimesheetsActionTypes.SaveTimesheets}}class UploadAttachment{constructor(origin,payload){this.origin=origin,this.payload=payload,this.type=TimesheetsActionTypes.UploadAttachment}}class UploadAttachmentSuccess{constructor(origin,payload){this.origin=origin,this.payload=payload,this.type=TimesheetsActionTypes.UploadAttachmentSuccess}}class UploadAttachmentFailed{constructor(origin){this.origin=origin,this.type=TimesheetsActionTypes.UploadAttachmentFailed}}const getTimesheetsFeatureState=Object(ngrx_store.o)("timesheets"),getCurrentWeek=Object(ngrx_store.p)(getTimesheetsFeatureState,state=>state.currentWeek),getCurrentStatement=Object(ngrx_store.p)(getTimesheetsFeatureState,state=>state.currentStatement),getStatements=Object(ngrx_store.p)(getTimesheetsFeatureState,state=>state.statements),getStatementsInWeek=Object(ngrx_store.p)(getTimesheetsFeatureState,state=>state.statementsInWeek),getStatementsLoading=Object(ngrx_store.p)(getTimesheetsFeatureState,state=>state.statementsLoading),getStatementSaving=Object(ngrx_store.p)(getTimesheetsFeatureState,state=>state.statementSaving),getAvailableWeeks=Object(ngrx_store.p)(getTimesheetsFeatureState,state=>state.availableWeeks),getAttachmentUploading=Object(ngrx_store.p)(getTimesheetsFeatureState,state=>state.attachmentUploading);var _a,_b,_c,moment=__webpack_require__(1),__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};let timesheets_shell_component_TimesheetsShellComponent=class TimesheetsShellComponent{constructor(store,router,navService){this.store=store,this.router=router,this.navService=navService,this.jobs=[{order:0,title:"Manager",organization:"The Banana Stand",shift:"Night shift",costCenter:"Project SE45",hours:Object(moment.duration)(750,"minutes"),kilometers:5,amount:124.23,pieces:2}],this.origin="Timesheets Shell Component",this.navService.setLocation("frame.menu.timesheets",{weekNumber:10})}ngOnInit(){this.loading$=this.store.select(getStatementsLoading),this.saving$=this.store.select(getStatementSaving),this.availableWeeks$=this.store.select(getAvailableWeeks),this.currentWeek$=this.store.select(getCurrentWeek),this.statementsInWeek$=this.store.select(getStatementsInWeek),this.currentStatement$=this.store.select(getCurrentStatement).pipe(Object(tap.a)(newStatement=>{newStatement&&(newStatement.statementNumber!=this.currentStatementNumber&&0==newStatement.otherComponentsLoaded&&0==newStatement.loadingOtherComponents&&this.store.dispatch(new LoadTimesheetComponents(this.origin,newStatement)),this.currentStatementNumber=newStatement.statementNumber)})),this.attachmentUploading$=this.store.select(getAttachmentUploading),this.store.dispatch(new LoadTimesheets(this.origin,[])),this.store.dispatch(new SetCurrentWeek(this.origin,null)),this.currentWeek$.subscribe(x=>{null===x?this.navService.setLocation("frame.menu.timesheets",{weekNumber:10}):this.navService.setLocation("frame.menu.timesheet-week-x",{weekNumber:x.weekNumber})})}selectWeek(week){this.store.dispatch(new SetCurrentWeek(this.origin,week)),this.navService.setBackButtonCallback(()=>{this.store.dispatch(new SetCurrentWeek(this.origin,null)),this.navService.setBackButtonCallback(null)})}selectStatement(statement){this.store.dispatch(new SetCurrentStatement(this.origin,statement)),this.navService.setLocation("frame.menu.timesheets")}saveStatements(result){this.store.dispatch(new SaveTimesheets(this.origin,result))}uploadStatementAttachment(attachmentDto){this.store.dispatch(new UploadAttachment(this.origin,attachmentDto))}};timesheets_shell_component_TimesheetsShellComponent=__decorate([Object(core.Component)({template:(__webpack_require__(2218).default||__webpack_require__(2218)).length?__webpack_require__(2218).default||__webpack_require__(2218):"",changeDetection:core.ChangeDetectionStrategy.Default}),__metadata("design:paramtypes",["function"==typeof(_a=void 0!==ngrx_store.h&&ngrx_store.h)?_a:Object,"function"==typeof(_b=void 0!==fesm2015_router.d&&fesm2015_router.d)?_b:Object,"function"==typeof(_c=void 0!==nav_service.a&&nav_service.a)?_c:Object])],timesheets_shell_component_TimesheetsShellComponent);var timesheets_component_a,timesheets_component_b,dtos=__webpack_require__(278),timesheets_component_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},timesheets_component_metadata=function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};let timesheets_component_TimesheetsComponent=class TimesheetsComponent{constructor(){this.selectStatement=new core.EventEmitter}onChangeSelectedStatement(){this.selectStatement.emit(this.currentStatement)}};timesheets_component_decorate([Object(core.Input)(),timesheets_component_metadata("design:type",Boolean)],timesheets_component_TimesheetsComponent.prototype,"loading",void 0),timesheets_component_decorate([Object(core.Input)(),timesheets_component_metadata("design:type","function"==typeof(timesheets_component_a=void 0!==dtos.f&&dtos.f)?timesheets_component_a:Object)],timesheets_component_TimesheetsComponent.prototype,"currentWeek",void 0),timesheets_component_decorate([Object(core.Input)(),timesheets_component_metadata("design:type",Array)],timesheets_component_TimesheetsComponent.prototype,"statementsInWeek",void 0),timesheets_component_decorate([Object(core.Input)(),timesheets_component_metadata("design:type","function"==typeof(timesheets_component_b=void 0!==dtos.c&&dtos.c)?timesheets_component_b:Object)],timesheets_component_TimesheetsComponent.prototype,"currentStatement",void 0),timesheets_component_decorate([Object(core.Output)(),timesheets_component_metadata("design:type",Object)],timesheets_component_TimesheetsComponent.prototype,"selectStatement",void 0),timesheets_component_TimesheetsComponent=timesheets_component_decorate([Object(core.Component)({selector:"fp-timesheets",template:(__webpack_require__(2219).default||__webpack_require__(2219)).length?__webpack_require__(2219).default||__webpack_require__(2219):""}),timesheets_component_metadata("design:paramtypes",[])],timesheets_component_TimesheetsComponent);var timesheet_shell_component_a,timesheet_shell_component_b,timesheet_shell_component_c,combineLatest=__webpack_require__(282),map=__webpack_require__(11),timesheet_shell_component_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},timesheet_shell_component_metadata=function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};let timesheet_shell_component_TimesheetShellComponent=class TimesheetShellComponent{constructor(store,navService,route){this.store=store,this.navService=navService,this.route=route,this.navService.setLocation("frame.menu.timesheet"),this.initRouteListener()}initRouteListener(){this.statementNumber$=this.route.params.pipe(Object(map.a)(params=>params.statementNumber))}ngOnInit(){this.statements$=this.store.select(getStatements),this.loading$=this.store.select(getStatementsLoading),this.statement$=Object(combineLatest.b)(this.statements$,this.statementNumber$,(statements,statementNumber)=>{var filteredStatements=statements.filter(s=>s.statementNumber==statementNumber);return filteredStatements.length>0?filteredStatements[0]:null}),this.store.dispatch(new LoadTimesheets("Timesheets component",[]))}};timesheet_shell_component_TimesheetShellComponent=timesheet_shell_component_decorate([Object(core.Component)({template:(__webpack_require__(2220).default||__webpack_require__(2220)).length?__webpack_require__(2220).default||__webpack_require__(2220):"",changeDetection:core.ChangeDetectionStrategy.Default}),timesheet_shell_component_metadata("design:paramtypes",["function"==typeof(timesheet_shell_component_a=void 0!==ngrx_store.h&&ngrx_store.h)?timesheet_shell_component_a:Object,"function"==typeof(timesheet_shell_component_b=void 0!==nav_service.a&&nav_service.a)?timesheet_shell_component_b:Object,"function"==typeof(timesheet_shell_component_c=void 0!==fesm2015_router.a&&fesm2015_router.a)?timesheet_shell_component_c:Object])],timesheet_shell_component_TimesheetShellComponent);var datetime=__webpack_require__(141),component_unit=__webpack_require__(424),utils=__webpack_require__(29);class DayComponentDto{constructor(){this.duration=0,this.durationStr="00:00"}}class timesheet_dto_StartEndBreakTimeDto extends DayComponentDto{constructor(){super(...arguments),this.startMinutesTouched=!1,this.endMinutesTouched=!1,this.breakTimeMinutesTouched=!1}get startMinutes(){return this._startMinutes}set startMinutes(value){null==value==0&&0==isNaN(value)&&(this.startMinutesTouched=!0),this._startMinutes=value,this.generateDuration()}get endMinutes(){return this._endMinutes}set endMinutes(value){null==value==0&&0==isNaN(value)&&(this.endMinutesTouched=!0),this._endMinutes=value,this.generateDuration()}get breakTimeMinutes(){return this._breakTimeMinutes}set breakTimeMinutes(value){null==value==0&&0==isNaN(value)&&(this.breakTimeMinutesTouched=!0),this._breakTimeMinutes=value,this.generateDuration()}setUntouched(){this.breakTimeMinutesTouched=!1,this.endMinutesTouched=!1,this.startMinutesTouched=!1}isTouched(){return this.startMinutesTouched&&this.endMinutesTouched}hasValue(){return null!=this.startMinutes||null!=this.endMinutes||null!=this.breakTimeMinutes}hasStartMinutes(){return null!=this.startMinutes}hasEndMinutes(){return null!=this.endMinutes}isValid(){return 0==this.hasValue()||this.hasStartMinutes()&&this.hasEndMinutes()&&this.duration>0}generateDuration(){var totalMinutes=0;0==(null==this.startMinutes||null==this.endMinutes)&&(totalMinutes=this.endMinutes-this.startMinutes,0==isNaN(this.breakTimeMinutes)&&(totalMinutes-=this.breakTimeMinutes),this.endMinutes<=this.startMinutes&&(totalMinutes+=1440)),this.duration=totalMinutes,this.durationStr=Object(datetime.a)(totalMinutes)}}class timesheet_dto_DayTotalDto extends DayComponentDto{constructor(){super(...arguments),this.totalMinutesTouched=!1}get totalMinutes(){return this._totalMinutes}set totalMinutes(value){null==value==0&&0==isNaN(value)&&(this.totalMinutesTouched=!0),this._totalMinutes=value,this.generateDuration()}setUntouched(){this.totalMinutesTouched=!1}isValid(){return!0}generateDuration(){if(null==this.totalMinutes)return 0;this.duration=this.totalMinutes,this.durationStr=Object(datetime.a)(this.totalMinutes)}}class timesheet_dto_OtherComponentDto{constructor(){}get text(){return this.component.payslipText}get unit(){return this.component.componentUnit}set count(value){this._count=value,this.generatePostText()}get count(){return this._count}get unitText(){switch(this.unit){case component_unit.a.Amount:return Object(utils._)("timesheets.componentunit.Amount");case component_unit.a.Day:return Object(utils._)("timesheets.componentunit.Day");case component_unit.a.Hour:return Object(utils._)("timesheets.componentunit.Hour");case component_unit.a.Kilometer:return Object(utils._)("timesheets.componentunit.Kilometer");case component_unit.a.Piece:return Object(utils._)("timesheets.componentunit.Piece");case component_unit.a.WorkedDay:return Object(utils._)("timesheets.componentunit.WorkedDay");default:return""}}generatePostText(){if(this.countStr="",this.unit==component_unit.a.Amount)return this.totalAmount=this.count,this.countStr=this.amountToEuroStr(this.count),this.totalAmountStr=this.amountToEuroStr(this.totalAmount),void(this.postText=" = "+this.totalAmountStr);let totalCount=0;this.unit==component_unit.a.Kilometer||this.unit==component_unit.a.Piece?(totalCount=this.count*this.component.personWage,null!=this.count?this.countStr=this.count.toString():this.countStr="0"):this.unit==component_unit.a.Hour&&(totalCount=this.count*this.component.personWage/60,this.countStr=Object(datetime.a)(null==this.count?0:this.count)),this.totalAmount=totalCount,this.totalAmountStr=this.amountToEuroStr(this.totalAmount),this.postText=" x "+this.amountToEuroStr(this.component.personWage)+" = "+this.totalAmountStr}amountToEuroStr(amount){return null==amount&&(amount=0),"€ "+amount.toLocaleString(navigator.language,{minimumFractionDigits:2,maximumFractionDigits:2})}}class UploadStatementAttachmentDto{}var timesheet_component_a,timesheet_component_b,timesheet_component_c,_d,timesheet_component_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},timesheet_component_metadata=function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};let timesheet_component_TimesheetComponent=class TimesheetComponent{constructor(){this.saveStatements=new core.EventEmitter,this.uploadStatementAttachment=new core.EventEmitter,this.submitted=!1,this.ComponentUnit=dtos.a}set statement(value){null==this._statement==0&&null==value==0&&this._statement.statementNumber==value.statementNumber&&this._statement.otherComponents.length==value.otherComponents.length?this._statement=value:(this._statement=value,this.initializeWithStatement(this._statement))}initializeWithStatement(statementValue){this.days=[],this.submitted=!1,this.otherComponents=[],null!=statementValue&&(statementValue.hours.forEach(hour=>{if(statementValue.statementType==dtos.e.DayTotal){var dayTotal=new timesheet_dto_DayTotalDto;dayTotal.date=hour.date,dayTotal.totalMinutes=hour.duration,dayTotal.setUntouched(),this.days.push(dayTotal)}else if(statementValue.statementType==dtos.e.StartEndBreakTime){var dayStartEndBreaktime=new timesheet_dto_StartEndBreakTimeDto;dayStartEndBreaktime.date=hour.date,dayStartEndBreaktime.startMinutes=hour.startTime,dayStartEndBreaktime.endMinutes=hour.endTime,dayStartEndBreaktime.breakTimeMinutes=hour.breakTime,dayStartEndBreaktime.setUntouched(),this.days.push(dayStartEndBreaktime)}}),statementValue.otherComponents.forEach(oc=>{var otherComponent=new timesheet_dto_OtherComponentDto;otherComponent.component=oc,otherComponent.count=oc.count,this.otherComponents.push(otherComponent)}))}getTotalMinutes(){var minutes=0;return this.days.forEach(day=>{let duration=day.duration;null==duration==0&&0==isNaN(duration)&&duration>=0&&(minutes+=duration)}),minutes}getTotalTime(){var minutes=this.getTotalMinutes();return Object(datetime.a)(minutes)}isDayTotal(){return this._statement.statementType==dtos.e.DayTotal}isStartEndBreakTime(){return this._statement.statementType==dtos.e.StartEndBreakTime}save(approve){this.submitted=!0;let valid=!0;for(let day of this.days)valid=day.isValid()&&valid;if(0!=valid){var returnStatement=Object.create(this._statement),componentNumber=this._statement.hours[0].componentNumber;returnStatement.hours=[],returnStatement.otherComponents=[],this.days.forEach(day=>{let hourDto=new dtos.d;if(hourDto.date=day.date,hourDto.duration=day.duration,hourDto.componentNumber=componentNumber,returnStatement.statementType==dtos.e.StartEndBreakTime){let dayStartEndBreaktime=day;hourDto.startTime=dayStartEndBreaktime.startMinutes,hourDto.endTime=dayStartEndBreaktime.endMinutes,hourDto.breakTime=dayStartEndBreaktime.breakTimeMinutes}returnStatement.hours.push(hourDto)}),returnStatement.sortHours(),this.otherComponents.forEach(component=>{let returnComponent=Object.create(component.component);returnComponent.count=component.count,returnStatement.otherComponents.push(returnComponent)});var saveObject=new dtos.b;saveObject.statements=[],saveObject.statements.push(returnStatement),saveObject.approve=approve,console.log(saveObject),this.saveStatements.emit(saveObject)}}onFileUploadChange(fileUploadDto){console.log("Timesheet component onFileUploadChange");let uploadDto=new UploadStatementAttachmentDto;var returnStatement=Object.create(this._statement);uploadDto.statement=returnStatement,uploadDto.fileName=fileUploadDto.fileName,uploadDto.base64FileData=fileUploadDto.base64Data,this.uploadStatementAttachment.emit(uploadDto)}};timesheet_component_decorate([Object(core.Input)(),timesheet_component_metadata("design:type","function"==typeof(timesheet_component_a=void 0!==dtos.c&&dtos.c)?timesheet_component_a:Object),timesheet_component_metadata("design:paramtypes",["function"==typeof(timesheet_component_b=void 0!==dtos.c&&dtos.c)?timesheet_component_b:Object])],timesheet_component_TimesheetComponent.prototype,"statement",null),timesheet_component_decorate([Object(core.Input)(),timesheet_component_metadata("design:type",Boolean)],timesheet_component_TimesheetComponent.prototype,"loading",void 0),timesheet_component_decorate([Object(core.Input)(),timesheet_component_metadata("design:type",Boolean)],timesheet_component_TimesheetComponent.prototype,"saving",void 0),timesheet_component_decorate([Object(core.Output)(),timesheet_component_metadata("design:type","function"==typeof(timesheet_component_c=void 0!==core.EventEmitter&&core.EventEmitter)?timesheet_component_c:Object)],timesheet_component_TimesheetComponent.prototype,"saveStatements",void 0),timesheet_component_decorate([Object(core.Input)(),timesheet_component_metadata("design:type",Boolean)],timesheet_component_TimesheetComponent.prototype,"attachmentUploading",void 0),timesheet_component_decorate([Object(core.Output)(),timesheet_component_metadata("design:type","function"==typeof(_d=void 0!==core.EventEmitter&&core.EventEmitter)?_d:Object)],timesheet_component_TimesheetComponent.prototype,"uploadStatementAttachment",void 0),timesheet_component_TimesheetComponent=timesheet_component_decorate([Object(core.Component)({selector:"fp-timesheet",template:(__webpack_require__(2221).default||__webpack_require__(2221)).length?__webpack_require__(2221).default||__webpack_require__(2221):"",styles:[(__webpack_require__(2222).default||__webpack_require__(2222)).length?__webpack_require__(2222).default||__webpack_require__(2222):""]}),timesheet_component_metadata("design:paramtypes",[])],timesheet_component_TimesheetComponent);var select_week_component=__webpack_require__(607),timesheet_summary_component=__webpack_require__(609),components_summary_component=__webpack_require__(229),job_summary_component=__webpack_require__(254),edit_hours_overlay_component=__webpack_require__(253),hour_component=__webpack_require__(178),start_end_break_component=__webpack_require__(255),worked_hours_compnent=__webpack_require__(610),mergeMap=__webpack_require__(47),catchError=__webpack_require__(205),ngx_translate_core=__webpack_require__(19),rest=__webpack_require__(94),of=__webpack_require__(17),ngx_toastr=__webpack_require__(234),statement_other_component_dto=__webpack_require__(822),component_type=__webpack_require__(820),component_subtype=__webpack_require__(821);class StatementDocumentDto{}function MapResponseToStatement(statementApi){let statement=new dtos.c;return statement.id=statementApi.id,statement.statementNumber=statementApi.statementNumber,statement.startDate=moment(statementApi.startDateString),statement.organisationId=statementApi.organisationId,statement.organisationName=statementApi.organisationName,statement.flexworkerId=statementApi.flexworkerId,statement.flexworkerFullNameReversed=statementApi.flexworkerFullNameReversed,statement.jobTitle=statementApi.jobTitle,statement.costObjectId=statementApi.costObjectId,statement.costObjectName=statementApi.costObjectName,statement.costObjectNumber=statementApi.costObjectNumber,statement.statementType=dtos.e[statementApi.statementType],statement.requestNumber=statementApi.requestNumber,statement.placingNumber=statementApi.placingNumber,statementApi.hours.forEach(hourApi=>{let hour=new dtos.d;hour.date=moment(hourApi.dateString),hour.startTime=hourApi.startTime,hour.endTime=hourApi.endTime,hour.breakTime=hourApi.breakTime,hour.duration=hourApi.duration,hour.componentNumber=hourApi.componentNumber,statement.hours.push(hour)}),statement.sortHours(),statement.otherComponentsLoaded=statementApi.otherComponentsLoaded,statementApi.otherComponents.forEach(otherComponentApi=>{let otherComponent=new statement_other_component_dto.a;otherComponent.componentNumber=otherComponentApi.componentNumber,otherComponent.componentType=component_type.a[otherComponentApi.componentType],otherComponent.componentSubType=component_subtype.a[otherComponentApi.componentSubType],otherComponent.componentUnit=component_unit.a[otherComponentApi.componentUnit],otherComponent.personPercentage=otherComponentApi.personPercentage,otherComponent.organisationPercentage=otherComponentApi.organisationPercentage,otherComponent.personWage=otherComponentApi.personWage,otherComponent.organisationRate=otherComponentApi.organisationRate,otherComponent.payslipText=otherComponentApi.payslipText,otherComponent.invoiceText=otherComponentApi.invoiceText,otherComponent.count=otherComponentApi.count,statement.otherComponents.push(otherComponent)}),statement.documents=MapDocumentsResponse(statementApi.documents),statement}function MapDocumentsResponse(data){let documents=[];return data.forEach(documentApi=>{let document=new StatementDocumentDto;document.documentId=documentApi.documentId,document.fileName=documentApi.fileName,document.order=documentApi.order,document.url=documentApi.url,documents.push(document)}),documents}function MapStatementToApiDto(statement){let apiStatement={};return apiStatement.id=statement.id,apiStatement.statementNumber=statement.statementNumber,apiStatement.startDateString=statement.startDate.format("YYYY-MM-DD"),apiStatement.organisationId=statement.organisationId,apiStatement.organisationName=statement.organisationName,apiStatement.flexworkerId=statement.flexworkerId,apiStatement.flexworkerFullNameReversed=statement.flexworkerFullNameReversed,apiStatement.jobTitle=statement.jobTitle,apiStatement.costObjectId=statement.costObjectId,apiStatement.costObjectName=statement.costObjectName,apiStatement.costObjectNumber=statement.costObjectNumber,apiStatement.statementType=statement.statementType.toString(),apiStatement.requestNumber=statement.requestNumber,apiStatement.placingNumber=statement.placingNumber,apiStatement.hours=[],apiStatement.otherComponents=[],statement.hours.forEach(hour=>{let hourApi={};hourApi.dateString=hour.date.format("YYYY-MM-DD"),hourApi.startTime=hour.startTime,hourApi.endTime=hour.endTime,hourApi.breakTime=hour.breakTime,hourApi.duration=hour.duration,hourApi.componentNumber=hour.componentNumber,apiStatement.hours.push(hourApi)}),statement.otherComponents.forEach(component=>{let componentApi={};componentApi.componentNumber=component.componentNumber,componentApi.componentType=component.componentType.toString(),componentApi.componentSubType=component.componentSubType.toString(),componentApi.componentUnit=component.componentUnit.toString(),componentApi.personPercentage=component.personPercentage,componentApi.organisationPercentage=component.organisationPercentage,componentApi.personWage=component.personWage,componentApi.organisationRate=component.organisationRate,componentApi.payslipText=component.payslipText,componentApi.invoiceText=component.invoiceText,componentApi.count=component.count,apiStatement.otherComponents.push(componentApi)}),apiStatement}class AttachmentSuccessDto{}var timesheets_effects_a,timesheets_effects_b,timesheets_effects_c,timesheets_effects_d,_e,timesheets_effects_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},timesheets_effects_metadata=function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};let timesheets_effects_TimesheetsEffects=class TimesheetsEffects{constructor(actions$,store,timesheetsApiService,toastrService,translateService){this.actions$=actions$,this.store=store,this.timesheetsApiService=timesheetsApiService,this.toastrService=toastrService,this.translateService=translateService,this.loadTimesheets$=this.actions$.pipe(Object(ngrx_effects.d)(TimesheetsActionTypes.LoadTimesheets),Object(mergeMap.b)(actionSrc=>{let action=actionSrc;var data={startDateString:"",statementNumbers:action.payload};return this.timesheetsApiService.getTimesheets(data).pipe(Object(map.a)(data=>{var statements=function MapResponseToStatements(data){var statements=[];return data.forEach(statementApi=>{let statement=MapResponseToStatement(statementApi);statements.push(statement)}),statements}(data.statements);return new LoadTimesheetsSuccess(this.newOrigin(action.origin),statements)}),Object(catchError.a)(()=>Object(of.a)(new LoadTimesheetsFailed(this.newOrigin(action.origin)))))})),this.loadTimesheetComponents$=this.actions$.pipe(Object(ngrx_effects.d)(TimesheetsActionTypes.LoadTimesheetComponents),Object(mergeMap.b)(action=>{var data={organisationId:action.payload.organisationId,statementNumber:action.payload.statementNumber};return this.timesheetsApiService.getTimesheetWithComponents(data).pipe(Object(map.a)(data=>{var statement=MapResponseToStatement(data.statement);return new LoadTimesheetComponentsSuccess(this.newOrigin(action.origin),statement)}),Object(catchError.a)(()=>Object(of.a)(new LoadTimesheetComponentsFailed(this.newOrigin(action.origin),action.payload.statementNumber))))})),this.saveTimesheets$=this.actions$.pipe(Object(ngrx_effects.d)(TimesheetsActionTypes.SaveTimesheets),Object(mergeMap.b)(action=>{let apiStatements=function MapStatementsToApiDto(data){var apiStatements=[];return data.forEach(statement=>{apiStatements.push(MapStatementToApiDto(statement))}),apiStatements}(action.payload.statements);var updateDto={};return updateDto.statements=apiStatements,updateDto.approve=action.payload.approve,this.timesheetsApiService.updateTimesheets(updateDto).pipe(Object(map.a)(data=>{let message=Object(utils._)("timesheets.messages.the-timesheet-is-saved");updateDto.approve&&(message=Object(utils._)("timesheets.messages.the-timesheet-is-approved")),this.translateService.get(message).subscribe(text=>this.toastrService.success(text));let statementNumbers=[];return updateDto.statements.forEach(stat=>{statementNumbers.push(stat.statementNumber)}),new LoadTimesheets(this.newOrigin(action.origin),statementNumbers)}),Object(catchError.a)(()=>Object(of.a)(new LoadTimesheetsFailed(this.newOrigin(action.origin)))))})),this.uploadAttachment$=this.actions$.pipe(Object(ngrx_effects.d)(TimesheetsActionTypes.UploadAttachment),Object(mergeMap.b)(action=>{let apiStatement=MapStatementToApiDto(action.payload.statement);var uploadDto={};return uploadDto.statement=apiStatement,uploadDto.base64FileData=action.payload.base64FileData,uploadDto.fileName=action.payload.fileName,this.timesheetsApiService.apiTimesheetsUploadAttachmentPost(uploadDto).pipe(Object(map.a)(data=>{let message=Object(utils._)("timesheets.messages.the-attachment-is-uploaded");this.translateService.get(message).subscribe(text=>this.toastrService.success(text));let attachmentSuccess=new AttachmentSuccessDto;return attachmentSuccess.statement=action.payload.statement,attachmentSuccess.documents=MapDocumentsResponse(data.documents),new UploadAttachmentSuccess(this.newOrigin(action.origin),attachmentSuccess)}),Object(catchError.a)(()=>Object(of.a)(new UploadAttachmentFailed(this.newOrigin(action.origin)))))}))}newOrigin(prevOrigin){return prevOrigin+" > Timesheets Effects"}};function MapStatementsToAvailableWeeks(statements){var statementWeeks=[];let initialStatementWeek=new dtos.f;initialStatementWeek.startDate=function GetDefaultWeek(){var date=moment().startOf("day");return date.isoWeekday()<4&&date.add(-7,"days"),date.startOf("isoWeek"),date}(),initialStatementWeek.statementCount=0,statementWeeks.push(initialStatementWeek);for(let s of statements){let statementWeek;for(let sw of statementWeeks)if(sw.startDate.isSame(s.startDate)){statementWeek=sw;break}null==statementWeek&&(statementWeek=new dtos.f,statementWeek.startDate=s.startDate.clone(),statementWeek.statementCount=0,statementWeeks.push(statementWeek)),statementWeek.statementCount++}return statementWeeks.sort((a,b)=>b.startDate.diff(a.startDate)),statementWeeks}function PostStatementUpdateState(state){return state.availableWeeks=MapStatementsToAvailableWeeks(state.statements),PostWeekSelectUpdateState(state)}function PostWeekSelectUpdateState(state){if(null==state.currentWeek)return state.statementsInWeek=[],state.currentStatement=null,state;if(state.currentWeek?state.statementsInWeek=state.statements.filter(s=>s.startDate.isSame(state.currentWeek.startDate)):this.statementsInWeek=[],state.statementsInWeek.length>0){state.statementsInWeek=state.statementsInWeek.sort(compareStatements);let oldSelectedStatements=null==state.currentStatement?[]:state.statementsInWeek.filter(s=>s.statementNumber==state.currentStatement.statementNumber);oldSelectedStatements.length>0?state.currentStatement=oldSelectedStatements[0]:state.currentStatement=state.statementsInWeek[0]}else state.currentStatement=null;return state}function compareStatements(a,b){let compareValueA="",compareValueB="";return a.organisationName!=b.organisationName?(compareValueA=a.organisationName,compareValueB=b.organisationName):a.jobTitle!=b.jobTitle&&(compareValueA=a.jobTitle,compareValueB=b.jobTitle),compareValueA>compareValueB?1:compareValueA<compareValueB?-1:0}timesheets_effects_decorate([Object(ngrx_effects.b)(),timesheets_effects_metadata("design:type",Object)],timesheets_effects_TimesheetsEffects.prototype,"loadTimesheets$",void 0),timesheets_effects_decorate([Object(ngrx_effects.b)(),timesheets_effects_metadata("design:type",Object)],timesheets_effects_TimesheetsEffects.prototype,"loadTimesheetComponents$",void 0),timesheets_effects_decorate([Object(ngrx_effects.b)(),timesheets_effects_metadata("design:type",Object)],timesheets_effects_TimesheetsEffects.prototype,"saveTimesheets$",void 0),timesheets_effects_decorate([Object(ngrx_effects.b)(),timesheets_effects_metadata("design:type",Object)],timesheets_effects_TimesheetsEffects.prototype,"uploadAttachment$",void 0),timesheets_effects_TimesheetsEffects=timesheets_effects_decorate([Object(core.Injectable)(),timesheets_effects_metadata("design:paramtypes",["function"==typeof(timesheets_effects_a=void 0!==ngrx_effects.a&&ngrx_effects.a)?timesheets_effects_a:Object,"function"==typeof(timesheets_effects_b=void 0!==ngrx_store.h&&ngrx_store.h)?timesheets_effects_b:Object,"function"==typeof(timesheets_effects_c=void 0!==rest.TimesheetsApiService&&rest.TimesheetsApiService)?timesheets_effects_c:Object,"function"==typeof(timesheets_effects_d=void 0!==ngx_toastr.b&&ngx_toastr.b)?timesheets_effects_d:Object,"function"==typeof(_e=void 0!==ngx_translate_core.c&&ngx_translate_core.c)?_e:Object])],timesheets_effects_TimesheetsEffects);var statement_dto=__webpack_require__(819);const initialState={currentWeek:null,currentStatement:null,statements:[],statementsInWeek:[],statementsLoading:!0,statementSaving:!1,availableWeeks:[],attachmentUploading:!1};var permission=__webpack_require__(232),timesheets_module_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};let TimesheetsModule=class TimesheetsModule{};TimesheetsModule=timesheets_module_decorate([Object(core.NgModule)({declarations:[timesheets_shell_component_TimesheetsShellComponent,timesheets_component_TimesheetsComponent,timesheet_shell_component_TimesheetShellComponent,timesheet_component_TimesheetComponent,select_week_component.a,timesheet_summary_component.a,components_summary_component.a,job_summary_component.a,edit_hours_overlay_component.a,hour_component.a,start_end_break_component.a,worked_hours_compnent.a],imports:[shared_module.a,fesm2015_forms.FormsModule,ngrx_store.j.forFeature("timesheets",(function reducer(state=initialState,action){let newState;switch(action.type){case TimesheetsActionTypes.LoadTimesheets:return Object.assign(Object.assign({},state),{statementsLoading:!0,statementSaving:!1});case TimesheetsActionTypes.LoadTimesheetsSuccess:return newState=Object.assign(Object.assign({},state),{statements:action.payload,statementsLoading:!1,statementSaving:!1}),PostStatementUpdateState(newState);case TimesheetsActionTypes.LoadTimesheetsFailed:return newState=Object.assign(Object.assign({},state),{statements:[],statementsLoading:!1,statementSaving:!1}),PostStatementUpdateState(newState);case TimesheetsActionTypes.LoadTimesheetComponents:newState=Object.assign(Object.assign({},state),{statementsLoading:!0}),newState.statements=newState.statements.filter(statement=>statement.statementNumber!==action.payload.statementNumber);const newLoadingStatement=Object.assign({},action.payload,{loadingOtherComponents:!0});return newState.statements.push(newLoadingStatement),newState;case TimesheetsActionTypes.LoadTimesheetComponentsSuccess:return newState=Object.assign(Object.assign({},state),{statementsLoading:!1}),newState.statements=newState.statements.filter(statement=>statement.statementNumber!==action.payload.statementNumber),newState.statements.push(action.payload),PostStatementUpdateState(newState);case TimesheetsActionTypes.LoadTimesheetComponentsFailed:return newState=Object.assign(Object.assign({},state),{statementsLoading:!1}),newState.statements=newState.statements.filter(statement=>statement.statementNumber!==action.payload),newState;case TimesheetsActionTypes.SetCurrentWeek:return newState=Object.assign(Object.assign({},state),{currentWeek:action.payload}),PostWeekSelectUpdateState(newState);case TimesheetsActionTypes.SetCurrentStatement:return Object.assign(Object.assign({},state),{currentStatement:action.payload});case TimesheetsActionTypes.SaveTimesheets:return Object.assign(Object.assign({},state),{statementSaving:!0});case TimesheetsActionTypes.UploadAttachment:return Object.assign(Object.assign({},state),{attachmentUploading:!0});case TimesheetsActionTypes.UploadAttachmentFailed:return Object.assign(Object.assign({},state),{attachmentUploading:!1});case TimesheetsActionTypes.UploadAttachmentSuccess:newState=Object.assign(Object.assign({},state),{attachmentUploading:!1});const statements=newState.statements.filter(statement=>statement.statementNumber===action.payload.statement.statementNumber);if(1===statements.length){newState.statements=newState.statements.filter(statement=>statement.statementNumber!==action.payload.statement.statementNumber);let statement=new statement_dto.a(statements[0]);statement.documents=action.payload.documents,newState.statements.push(statement)}return PostStatementUpdateState(newState);default:return state}})),ngrx_effects.c.forFeature([timesheets_effects_TimesheetsEffects]),fesm2015_router.e.forChild([{path:"",component:timesheets_shell_component_TimesheetsShellComponent,canActivate:[auth_guard.a,is_flexworker_guard.a],data:{permissions:[permission.a.FlexworkerTimesheet]}},{path:":statementNumber",component:timesheet_shell_component_TimesheetShellComponent,canActivate:[auth_guard.a,is_flexworker_guard.a],data:{permissions:[permission.a.FlexworkerTimesheet]}}])]})],TimesheetsModule)}}]);
//# sourceMappingURL=147.662822987faa05fa847b.bundle.js.map